# 서버 개발자 부분

인터넷뱅킹 이용 현황 정보 제공 API 개발
: 인터넷 이용현황과 이용행태 정보를 제공하는 서비스를 개발하고자 합니다. 주어진 데이터셋을 기반으로 아래
기능명세에 대한 API 를 개발하고 Unit Test 코드를 개발하세요.
### 프로젝트 개발 환경

```
JAVA - JDK1.8_0_121
SPRING FRAMEWORK - 5.1.19.REALEASE(BOOT 2.5.8.RELEASE)
Gradle - 5.6.2
DATABASE H2 - 1.4.199
IntelliJ - 2019.2.2 
 - ECLISE(STS) 대체 가능
```

### H2 DB 설치 하기

H2는 프로젝트 DB로 로컬PC 또는 연동 서버에 설치가 필요

```
환경에 맞는 설치 파일의 URL에서 다운 받은 후 가이드에 따라 설치 진행
http://www.h2database.com/html/download.html
* 별도 콘솔을 제공하여 타 데이터 베이스를 다뤄 본 개발자라면 충분히 활용 가능
```

### 빌드방법

```
1. 프로젝트 위치에서 grade build
2. IDE TOOL을 통해 빌드

빌드 후 실행 방법
1.WINDOW > CMD 커맨드 실행 > java -jar 빌드명.jar
2.LINUX/UNIX > java -jar 빌드명.jar
```

### 문제해결 전략
```
필수문제:

• 데이터 파일(서울시 인터넷뱅킹 이용률 및 이용기기 통계 데이터)에서 각 레코드를 데이터베이스에
저장하는 코드를 구현하세요.
 > 스프링 부트 내장 톰캣 or 네티서버가 구동되고 웹 서비스를 위한 빈들을 모두 읽어 온 후에 호출 되는 함수를 활용하여
  데이터가 저장된 CSV파일을 가져와 CSV파일용 오픈소스인 OpenCSV를 활용하여 쉽게 읽어 올 수 있었며 데이터들은 
  DB에 넣기 쉽게 가공하여 접속 기기 테이블과, 년도별 이용률 테이블, 기기및 년도별 이용률 테이블에 저장하도록 진행하였습니다.

• 인터넷뱅킹 서비스 접속 기기 목록을 출력하는 API 를 개발하세요.
 > JPA에서 제공해주는 함수를 활용하여 접속 기기 테이블에서 조회 진행 

• 각 년도별로 인터넷뱅킹을 가장 많이 이용하는 접속기기를 출력하는 API 를 개발하세요.
 > 단순 SQL문으로 진행 했다면 쉬운 문제였지만, 문제를 해결하는데 많은시간을 소비했습니다. 왜냐하면 최근 JPA를 공부하고 있었지만 아직
  queryDsl를 접해보지 못하였고 하지만 사용 해보기 위해 책의 예제 및 인터넷 예제를 참고하여 급하게 진행 하려다보니 인라인뷰(FROM절 서비쿼리) 
  를 작성하지 못하는 이슈를 뒤늦게 알고서야 급하게 nativeQuery로 진행하게 되었습니다.

• 특정 년도를 입력받아 그 해에 인터넷뱅킹에 가장 많이 접속하는 기기 이름을 출력하세요.
 > REST API 형태로 구성 GET 방식으로 년도 정보를 입력받아서 queryDsl로 작성하여 데이터 호출 진행 

• 디바이스 아이디를 입력받아 인터넷뱅킹에 접속 비율이 가장 많은 해를 출력하세요.
 > REST API 형태로 구성 GET 방식으로 디바이스 아이디 정보를 입력받아서 queryDsl로 작성하여 데이터 호출 진행  

옵션문제:

• 인터넷뱅킹 접속 기기 ID 를 입력받아 2019 년도 인터넷뱅킹 접속 비율을 예측하는 API 를 개발하세요.
 > 처음에는 머신러닝 오픈 소스를 활용하여 진행하기 위해 구글신을 통해 열심히 서칭을 하였으나.. 자바를 위한 오픈소스는 많지 않았
  으며 실제로 있다 하더라도 이해하고 적용하기까지 시간이 충분하지 않다고 판단하여, 아파치 재단에서 제공하는 common-math3 라이브러리에서 
  단순 순회 분석을 제공하여 활용하기로 했습니다.
  하지만 예상과 달리 데이터를 넣어 결과 예측 값에 제한을 주는 옵션이 없어 스마트폰의 이용률이 100%가 넘어가는 이슈가 발생하여 
  개인적인 그래프 모양을 그려 본 후 수학 적?모델에 비슷하게 예측 값 계산식(E = R + N(1+ X/100) R > N 일때)을 도출하여 진행하였습니다. 


추가 제약사항(옵션):

• 성능을 고려하여 10000 TPS 이상의 요청을 받을 수 있는 아키텍처에 대해서 고민해서 API 개발 시 반영해주세요. 
  (오픈 소스나 여타 다른 SW 가 필요할 경우 면접 시에 의견을 말씀해주세요.)
 > 처음 과제를 받았을 때 제일 도전해 보고싶은 제약 사항으로 초기 과제 당시 개인 공부 할겸으로 SPRING FRAMEWORK5 의 WEBFLUX를
  활용하여 비동기, non-blocking 방식과 RDBMS를 async 방식으로 연동가능하게 해주는 R2DBC(H2지원)를 활용하려고 했었습니다.
  하지만 기본 로직은 구성했지만 WEBFLUX 활용 시 글로벌 예외처리 부분에서 제대로 해결하지 못하고 원복을 하게 되어 아쉬움으로 남아 있습니다.  
  (일부 소스가 주석으로 남아 있습니다.)

• API 인증을 위해 JWT(Json Web Token)를 이용해서 Token 기반 API 인증 기능을 개발하고 각 API 호출 시에 HTTP Header에 
  발급받은 토큰을 가지고 호출하세요.
 > JWT를 활용해 본적이 없어 시간적인 여유가 있었다면 공부를 하면 진행 하려고 했지만 부족한 실력 때문인지 다른 부분에서 시간을 많이 할애하여  
  구현하지 못했습니다. 하지만 과제가 마무리되더라도 개인적으로 추가 개발 예정입니다.

```
